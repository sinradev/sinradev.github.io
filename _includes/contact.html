<div class="contact-page">
  <!-- Hero Section -->
  <section class="contact-hero">
    <div class="container">
      <div class="hero-content">
        <h1>{{ site.data[site.active_lang].strings.contact.title }}</h1>
        <p class="hero-subtitle">{{ site.data[site.active_lang].strings.contact.heading }}</p>
        <p class="hero-description">{{ site.data[site.active_lang].strings.contact.description }}</p>
      </div>
    </div>
  </section>

  <!-- Contact Content -->
  <section class="contact-content">
    <div class="container">
      <div class="contact-form-container-centered">
        <div class="form-card">
            <h2>{{ site.data[site.active_lang].strings.contact.send_message_title }}</h2>
            <p>{{ site.data[site.active_lang].strings.contact.send_message_desc }}</p>

            <form action="http://localhost:3000/contact/form" method="post" class="contact-form" aria-label="Contact form">
              <input type="hidden" name="_to" value="support@example.com" />
              <input type="text" name="_gotcha" style="display: none;">
              <div class="form-error-alert" role="alert" aria-live="polite" aria-hidden="true"></div>

              <div class="form-group">
                <label for="name">{{ site.data[site.active_lang].strings.contact.full_name }} <span aria-label="required">*</span></label>
                <input type="text" name="name" id="name" placeholder="{{ site.data[site.active_lang].strings.contact.placeholders.full_name }}" required aria-required="true" />
              </div>

              <div class="form-group">
                <label for="email">{{ site.data[site.active_lang].strings.contact.email }} <span aria-label="required">*</span></label>
                <input type="email" name="email" id="email" placeholder="{{ site.data[site.active_lang].strings.contact.placeholders.email }}" required aria-required="true" />
              </div>

              <div class="form-group">
                <label for="subject">{{ site.data[site.active_lang].strings.contact.subject }} <span aria-label="required">*</span></label>
                <select name="subject" id="subject" required aria-required="true">
                  <option value="">{{ site.data[site.active_lang].strings.contact.placeholders.subject }}</option>
                  <option value="general">{{ site.data[site.active_lang].strings.contact.subject_general }}</option>
                  <option value="support">{{ site.data[site.active_lang].strings.contact.subject_support }}</option>
                  <option value="sales">{{ site.data[site.active_lang].strings.contact.subject_sales }}</option>
                  <option value="partnership">{{ site.data[site.active_lang].strings.contact.subject_partnership }}</option>
                </select>
              </div>

              <div class="form-group">
                <label for="message">{{ site.data[site.active_lang].strings.contact.message }} <span aria-label="required">*</span></label>
                <textarea name="message" id="message" placeholder="{{ site.data[site.active_lang].strings.contact.placeholders.message }}" rows="6" required aria-required="true"></textarea>
              </div>

              <input type="hidden" name="return_url" value="{{ site.url }}/{% if site.active_lang != site.default_lang %}fr/{% endif %}contact-success/" />

              <button type="submit" class="submit-button">
                <span>{{ site.data[site.active_lang].strings.contact.send_message }}</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="contact-faq">
    <div class="container">
      <h2>{{ site.data[site.active_lang].strings.contact.faq_title }}</h2>
      <div class="faq-grid">
        {% for item in site.data[site.active_lang].contact_faq %}
          <div class="faq-item">
            <div class="faq-question">
              <h3>{{ item.question }}</h3>
              <svg class="faq-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M19 9l-7 7-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="faq-answer">
              <p>{{ item.answer }}</p>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // FAQ Toggle
    const faqItems = document.querySelectorAll('.faq-item');
    faqItems.forEach(item => {
      const question = item.querySelector('.faq-question');
      const answer = item.querySelector('.faq-answer');

      question.addEventListener('click', () => {
        const isOpen = item.classList.contains('open');

        // Close all other items
        faqItems.forEach(otherItem => {
          otherItem.classList.remove('open');
        });

        // Toggle current item
        if (!isOpen) {
          item.classList.add('open');
        }
      });
    });

    // Form validation and enhancement
    const form = document.querySelector('.contact-form');
    const submitButton = form.querySelector('.submit-button');
    const errorAlert = form.querySelector('.form-error-alert');

    form.addEventListener('submit', function(e) {
      const requiredFields = form.querySelectorAll('[required]');
      let isValid = true;
      let errorMessages = [];

      requiredFields.forEach(field => {
        if (!field.value.trim()) {
          isValid = false;
          field.classList.add('error');
          field.setAttribute('aria-invalid', 'true');
          errorMessages.push(field.previousElementSibling.textContent);
        } else {
          field.classList.remove('error');
          field.setAttribute('aria-invalid', 'false');
        }
      });

      if (!isValid) {
        e.preventDefault();
        errorAlert.setAttribute('aria-hidden', 'false');
        errorAlert.textContent = '{{ site.data[site.active_lang].strings.contact.validation_error }}';
      } else {
        errorAlert.setAttribute('aria-hidden', 'true');
        errorAlert.textContent = '';
        submitButton.disabled = true;
        submitButton.innerHTML = '<span>{{ site.data[site.active_lang].strings.contact.sending }}</span>';
      }
    });
  });
</script>
